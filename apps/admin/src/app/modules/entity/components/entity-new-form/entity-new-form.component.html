<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <!-- <ly-field appearance="filled" color="accent" lyWidth="1">
    <ly-label>Name</ly-label>
    <input lyNativeControl formControlName="name" [required]="true" />
    <ly-error *ngIf="name.hasError('required')">Required</ly-error>
  </ly-field> -->

  <ly-field
    appearance="filled"
    color="accent"
    lyWidth="1"
    *ngFor="let field of controls | keyvalue"
  >
    <ly-label>{{ field.key | titlecase }}</ly-label>
    <input lyNativeControl [formControlName]="field.key" />
    <button
      ly-button
      color="warn"
      appearance="icon"
      lySuffix
      lyTooltip="Delete field"
      *ngIf="field.key !== 'name'"
      (click)="onRemoveField(field.key)"
    >
      <ly-icon>delete_forever</ly-icon>
    </button>
    <ly-error *ngIf="field.value.hasError('required')">Required</ly-error>
  </ly-field>

  <button
    ly-button
    bg="accent"
    lyWidth="1"
    type="button"
    (click)="onAddField()"
  >
    Add field
  </button>

  <div
    lyMt="1rem"
    lyDisplay="flex"
    lyJustifyContent="space-between"
    lyAlignItems="center"
  >
    <button ly-button outlined type="button" color="warn" (click)="onReset()">
      Reset
    </button>
    <button
      ly-button
      outlined
      type="submit"
      color="accent"
      [disabled]="form.invalid"
    >
      Submit
    </button>
  </div>
</form>
